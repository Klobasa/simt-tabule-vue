{"version":3,"sources":["webpack:///./src/views/Trips.vue?cf22","webpack:///./src/views/Trips.vue","webpack:///./src/views/Trips.vue?693d","webpack:///./src/components/DelayCounter.vue","webpack:///./src/components/DelayCounter.vue?b8cc"],"names":["class","src","width","height","role","aria-label","xlink:href","alt","datetime","trips","timeGenerated","datetime-format","loading","length","tripHeader","trip","line","traction","key","id","to","startStation","station","departure","endStation","actualStation","departureFromActualStation","components","DelayCounter","FormatDateTime","name","data","timeInterval","created","this","callData","setInterval","methods","fetch","response","json","beforeUnmount","clearInterval","__exports__","render","style","textColor","odchylka","props","departureTime","interval","color","countOdchylka","plusMinus","fromISO","now","fromDateTimes","d","fromObject","years","quarters","months","weeks","days","hours","minutes","parseInt","seconds","milliseconds"],"mappings":"kHAAA,W,iOCESA,MAAM,W,GACJA,MAAM,S,GACJA,MAAM,oC,uBACT,eAEM,OAFDA,MAAM,8CAA4C,CACrD,eAAuB,UAAnB,oB,SAEDA,MAAM,iD,iBAAgD,2B,GAQ9DA,MAAM,S,2aAUJA,MAAM,uB,uBACT,eAA6C,OAAxCC,IAAA,IAA4BC,MAAM,M,6BAAM,iB,GAA7C,E,YAGGF,MAAM,sB,uBACT,eAA8I,OAAzIA,MAAM,wBAAwBE,MAAM,KAAKC,OAAO,KAAKC,KAAK,MAAMC,aAAW,W,CAAU,eAA8C,OAAzCC,aAAW,iC,uBAAoC,8D,GAA9I,E,MAMKN,MAAM,oB,GAEJA,MAAM,mB,GACJA,MAAM,uB,GAE6CA,MAAM,0B,SACrDC,IAAA,IAA8BM,IAAI,I,SAClCN,IAAA,IAAoCM,IAAI,I,SACxCN,IAAA,IAA6BM,IAAI,I,GAKvCP,MAAM,qB,GAGNA,MAAM,wE,SACJA,MAAM,kB,iBAAiD,O,sBAIzDA,MAAM,qB,GACJA,MAAM,kB,GAGRA,MAAM,qB,GACJA,MAAM,kB,uLA9DnB,eAaM,YAZJ,eAWM,MAXN,EAWM,CAVJ,eASM,MATN,EASM,CARJ,eAOM,MAPN,EAOM,CANJ,EAGA,eAEM,MAFN,EAEM,C,EADmB,eAAmG,GAAhFQ,SAAU,EAAAC,MAAMC,cAAgBC,kBAAiB,Y,+BAOrG,eAwDM,MAxDN,EAwDM,CAvDJ,GAS8C,IAAP,EAAAC,S,iBAAvC,eAGM,MAHN,EAGM,I,uBACuC,IAAP,EAAAA,SAAiC,IAAZ,EAAAH,MAAMI,Q,iBAAjE,eAGM,MAHN,EAGM,I,0CAGN,eAmCM,2BAnCgL,EAAAJ,MAAMK,YAAU,SAAxBC,G,wBAA9K,eAmCM,OAnCDf,MAAK,gBAAC,YAAW,CAA4B,IAAlBe,EAAKC,KAAKC,SAAQ,OAAoC,IAAlBF,EAAKC,KAAKC,SAAQ,aAA0C,IAAlBF,EAAKC,KAAKC,SAAQ,6BAAyEC,IAAKH,EAAKI,I,CACjN,eAgCM,MAhCN,EAgCM,CA9BJ,eAUM,MAVN,EAUM,CATJ,eAOM,MAPN,EAOM,CANJ,eAKM,OALDnB,MAAK,gBAAC,iBAAgB,CAA4B,IAAlBe,EAAKC,KAAKC,SAAQ,OAAoC,IAAlBF,EAAKC,KAAKC,SAAQ,aAA0C,IAAlBF,EAAKC,KAAKC,SAAQ,8B,CACnI,eAAkI,GAApHG,GAAE,eAAoBL,EAAKI,K,yBAAK,iBAAsE,CAAtE,eAAsE,OAAtE,EAAsE,eAA9BJ,EAAKC,KAAKA,MAAO,IAAM,O,kBAC3C,IAAlBD,EAAKC,KAAKC,U,iBAA1D,eAA0E,MAA1E,I,sBACwE,IAAlBF,EAAKC,KAAKC,U,iBAAhE,eAAgF,MAAhF,I,sBACiE,IAAlBF,EAAKC,KAAKC,U,iBAAzD,eAAyE,MAAzE,I,8BAKN,eAEM,MAFN,EAEM,CADJ,eAAkF,4BAAxEF,EAAKM,aAAaC,SAAU,KAAE,eAAGP,EAAKM,aAAaE,WAAY,IAAC,KAE5E,eAIM,MAJN,EAIM,CAH6C,OAAfR,EAAKS,Y,iBAAvC,eAEM,MAFN,EAEM,C,EADF,eAAoC,wBAA9BT,EAAKS,WAAWF,SAAO,G,EAAQ,eAAgD,aAAzC,IAAC,eAAGP,EAAKS,WAAWD,WAAY,IAAC,M,wBAGnF,eAEM,MAFN,EAEM,CADJ,eAAyE,MAAzE,EAAyE,CAA7C,eAAuC,wBAAjCR,EAAKU,cAAcH,SAAO,OAG9D,eAKM,MALN,EAKM,CAJJ,eAGM,MAHN,EAGM,CAF6F,MAA/BP,EAAKW,4B,iBAAvE,eAA2H,G,MAA3GH,UAAWR,EAAKW,4B,6CAChC,eAAiD,4BAAvCX,EAAKU,cAAcF,WAAS,U,iFAanC,GACbI,WAAY,CAAEC,eAAA,KAAcC,iBAAA,MAC5BC,KAAM,QACNC,KAHa,WAIX,MAAO,CACLtB,MAAO,GACPuB,aAAc,KACdpB,SAAS,IAGbqB,QAVa,WAUH,WACRC,KAAKC,WACLD,KAAKF,aAAeI,aAAY,kBAAM,EAAKD,aAAY,MAEzDE,QAAS,CACDF,SADC,WACU,8KACQG,MAAM,oCADd,cACTC,EADS,gBAEIA,EAASC,OAFb,OAEf,EAAK/B,MAFU,OAGf,EAAKG,SAAU,EAHA,+CAMnB6B,cArBa,WAsBXC,cAAcR,KAAKF,gB,iCC7FvB,MAAMW,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,yHCRb,eAA8D,OAAlDC,MAAK,eAAE,EAAAC,Y,CAAW,eAA0B,6BAAfC,UAAQ,I,mBAMpC,GACbjB,KAAM,eACNkB,MAAO,CAAC,aACRjB,KAHa,WAIX,MAAO,CACLkB,cAAef,KAAKX,UACpBwB,SAAU,KACVG,SAAU,KACVJ,UAAW,CACTK,MAAO,MAIblB,QAba,WAcXC,KAAKkB,iBAEPf,QAAS,CACPe,cADO,WACS,WACdV,cAAcR,KAAKgB,UACnB,IACIH,EACAM,EAFA9B,EAAY,cAAS+B,QAAQpB,KAAKX,WAGtC,GAAiB,MAAbA,EAAmB,CAEjB,cAASgC,MAAQhC,GACnBwB,EAAW,cAASS,cAAc,cAASD,MAAOhC,GAAWV,OAAO,gBACpEwC,EAAY,MAEZN,EAAW,cAASS,cAAcjC,EAAW,cAASgC,OAAO1C,OAAO,gBACpEwC,EAAY,KAGd,IAAII,EAAI,cAASC,WAAW,CAC1BC,MAAO,EACPC,SAAU,EACVC,OAAQ,EACRC,MAAO,EACPC,KAAM,EACNC,MAAO,EACPC,QAASC,SAASnB,EAAW,IAAO,IACpCoB,QAASD,SAASA,SAASnB,EAAW,KAAyC,GAAjCmB,SAASnB,EAAW,IAAO,KACzEqB,aAAc,IAEhBlC,KAAKa,SAAWM,GAAaI,EAAEQ,QAAU,GAAK,IAAMR,EAAEQ,QAAUR,EAAEQ,SAAW,KAAOR,EAAEU,QAAU,GAAK,IAAMV,EAAEU,QAAUV,EAAEU,SAGvHjC,KAAKY,UAAUK,MADC,MAAdE,GAAqBN,EAAW,KACX,UACdA,EAAW,IACG,UAEA,UAI3Bb,KAAKgB,SAAWd,aAAY,kBAAM,EAAKgB,kBAAiB,OAG5DX,cAzDa,WA0DXC,cAAcR,KAAKgB,Y,qBC5DvB,MAAMP,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-0cb4aecb.63deeaca.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Trips.vue?vue&type=style&index=0&id=57cc13b2&scoped=true&lang=css\"","<template>\r\n  <div>\r\n    <div class=\"primary\">\r\n      <div class=\"title\">\r\n        <div class=\"align-items-center row flex-fill\">\r\n          <div class=\"col text-center text-sm-start pb-3 pb-sm-0\">\r\n            <h2>Aktuální spoje</h2>\r\n          </div>\r\n          <div class=\"col-12 col-sm-7 col-md-5 col-lg-4 text-sm-end\">\r\n             Poslední aktualizace: <format-date-time :datetime=\"trips.timeGenerated\" :datetime-format=\"'HH:mm:ss'\"></format-date-time>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"board\">\r\n    <div class=\"boardHeader d-none d-sm-flex\">\r\n      <div class=\"col-12 col-sm-2\">Linka</div>\r\n      <div class=\"col-sm-6 col-md-2\">Výchozí zastávka</div>\r\n      <div class=\"col-12 col-sm-6 col-md-3\">Cílová zastávka</div>\r\n      <div class=\"col-sm-6 col-md-2\">Aktuální zastávka</div>\r\n      <div class=\"col-sm-6 col-md-2\">Odchylka</div>\r\n\r\n    </div>\r\n\r\n    <div class=\"alert alert-primary\" v-if=\"loading===true\">\r\n      <img src=\"../assets/loading.gif\" width=\"24\"/>\r\n      Načítání...\r\n    </div>\r\n    <div class=\"alert alert-danger\" v-if=\"loading === false && trips.length === 0\">\r\n      <svg class=\"bi flex-shrink-0 me-2\" width=\"24\" height=\"24\" role=\"img\" aria-label=\"Danger:\"><use xlink:href=\"#exclamation-triangle-fill\"/></svg>\r\n      Seznam spojů se nepodařilo načíst nebo nejede žádný spoj\r\n    </div>\r\n\r\n\r\n    <div class=\"boardData\" :class=\"[trip.line.traction === 2 ? 'tram' : trip.line.traction === 1 ? 'trolleybus' : trip.line.traction === 0 ? 'bus' : 'tractionUndefined']\" v-for=\"trip in trips.tripHeader\" :key=\"trip.id\">\r\n      <div class=\"boardDataPrimary\">\r\n\r\n        <div class=\"col-12 col-sm-2\">\r\n          <div class=\"line d-inline-block\">\r\n            <div class=\"px-2 py-1 mr-1\" :class=\"[trip.line.traction === 2 ? 'tram' : trip.line.traction === 1 ? 'trolleybus' : trip.line.traction === 0 ? 'bus' : 'tractionUndefined']\">\r\n              <router-link :to=\"{path: '/spoj/' + trip.id}\"><span class=\"biggerFont boardButton\">{{ trip.line.line }}&nbsp;</span></router-link>\r\n              <img src=\"../assets/line/tram.svg\" alt=\"\" v-if=\"trip.line.traction === 2\">\r\n              <img src=\"../assets/line/trolleybus.svg\" alt=\"\" v-if=\"trip.line.traction === 1\">\r\n              <img src=\"../assets/line/bus.svg\" alt=\"\" v-if=\"trip.line.traction === 0\">\r\n            </div>\r\n          </div>\r\n        <!--  <div class=\"line\"><span class=\"boardButton\" :class=\"trip.line.traction\">{{ trip.line.line }} » {{ trip.endStation }}</span></div> -->\r\n        </div>\r\n        <div class=\"col-sm-6 col-md-2\">\r\n          <small>{{ trip.startStation.station }} ({{ trip.startStation.departure }})</small>\r\n        </div>\r\n        <div class=\"col-12 col-sm-6 col-md-3 d-flex flex-row align-items-start flex-wrap\">\r\n          <div class=\"d-inline-block\" v-if=\"trip.endStation !== null\">\r\n            » <b>{{ trip.endStation.station }}</b> <small>({{ trip.endStation.departure }})</small>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-6 col-md-2\">\r\n          <div class=\"d-inline-block\"><b>{{ trip.actualStation.station }}</b></div>\r\n        </div>\r\n\r\n        <div class=\"col-sm-6 col-md-2\">\r\n          <div class=\"d-inline-block\">\r\n            <delay-counter :departure=\"trip.departureFromActualStation\" v-if=\"trip.departureFromActualStation != null\"></delay-counter>\r\n            <small>{{ trip.actualStation.departure }}</small>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n      <!--</router-link>-->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DelayCounter from \"../components/DelayCounter\";\r\nimport FormatDateTime from \"../components/FormatDateTime\";\r\nexport default {\r\n  components: { DelayCounter, FormatDateTime },\r\n  name: \"Trips\",\r\n  data() {\r\n    return {\r\n      trips: [],\r\n      timeInterval: null,\r\n      loading: true,\r\n    };\r\n  },\r\n  created() {\r\n    this.callData();\r\n    this.timeInterval = setInterval(() => this.callData(), 10000);\r\n  },\r\n  methods: {\r\n    async callData() {\r\n      const response = await fetch(process.env.VUE_APP_ROOT_API + \"spoj\");\r\n      this.trips = await response.json();\r\n      this.loading = false;\r\n    }\r\n  },\r\n  beforeUnmount() {\r\n    clearInterval(this.timeInterval);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.link-spanner{\r\n  position:absolute;\r\n  width:100%;\r\n  height:100%;\r\n  top:0;\r\n  left: 0;\r\n  z-index: 1;\r\n}\r\n.board > .tram {\r\n  box-shadow: 5px 0 0 0 inset #f0be32;\r\n}\r\n\r\n.board > .trolleybus {\r\n  box-shadow: 5px 0 0 0 inset #1e9641;\r\n}\r\n\r\n.board > .bus {\r\n  box-shadow: 5px 0 0 0 inset #cd2837;\r\n}\r\n\r\na {\r\n  all: unset;\r\n}\r\n</style>","import { render } from \"./Trips.vue?vue&type=template&id=57cc13b2&scoped=true\"\nimport script from \"./Trips.vue?vue&type=script&lang=js\"\nexport * from \"./Trips.vue?vue&type=script&lang=js\"\n\nimport \"./Trips.vue?vue&type=style&index=0&id=57cc13b2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ondra\\\\WebstormProjects\\\\simt-tabule-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57cc13b2\"]])\n\nexport default __exports__","<template>\r\n  <div v-bind:style=\"textColor\"><b>{{ this.odchylka }}</b></div>\r\n</template>\r\n\r\n<script>\r\nimport { DateTime, Duration, Interval } from \"luxon\";\r\n\r\nexport default {\r\n  name: \"DelayCounter\",\r\n  props: [\"departure\"],\r\n  data() {\r\n    return {\r\n      departureTime: this.departure,\r\n      odchylka: null,\r\n      interval: null,\r\n      textColor: {\r\n        color: \"\"\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.countOdchylka();\r\n  },\r\n  methods: {\r\n    countOdchylka() {\r\n      clearInterval(this.interval)\r\n      let departure = DateTime.fromISO(this.departure)\r\n      let odchylka\r\n      let plusMinus\r\n      if (departure != null) {\r\n\r\n        if (DateTime.now() < departure) {\r\n          odchylka = Interval.fromDateTimes(DateTime.now(), departure).length(\"milliseconds\") // .toFormat(\"mm:ss\").toString()\r\n          plusMinus = \"-\"\r\n        } else {\r\n          odchylka = Interval.fromDateTimes(departure, DateTime.now()).length(\"milliseconds\") // .toFormat(\"mm:ss\").toString()\r\n          plusMinus = \"+\"\r\n        }\r\n\r\n        let d = Duration.fromObject({\r\n          years: 0,\r\n          quarters: 0,\r\n          months: 0,\r\n          weeks: 0,\r\n          days: 0,\r\n          hours: 0,\r\n          minutes: parseInt(odchylka / 1000 / 60),\r\n          seconds: parseInt(parseInt(odchylka / 1000) - parseInt(odchylka / 1000 / 60) * 60),\r\n          milliseconds: 0\r\n        })\r\n        this.odchylka = plusMinus + (d.minutes < 10 ? \"0\" + d.minutes : d.minutes) + \":\" + (d.seconds < 10 ? \"0\" + d.seconds : d.seconds)\r\n\r\n        if (plusMinus === \"-\" || odchylka < 120000) { //2 mins\r\n          this.textColor.color = \"#73bb15\"\r\n        } else if (odchylka < 300000) { //5 min\r\n          this.textColor.color = \"#ec9706\"\r\n        } else {\r\n          this.textColor.color = \"#d42724\"\r\n        }\r\n\r\n      }\r\n      this.interval = setInterval(() => this.countOdchylka(), 1000)\r\n    }\r\n  },\r\n  beforeUnmount() {\r\n    clearInterval(this.interval)\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./DelayCounter.vue?vue&type=template&id=2875c243\"\nimport script from \"./DelayCounter.vue?vue&type=script&lang=js\"\nexport * from \"./DelayCounter.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ondra\\\\WebstormProjects\\\\simt-tabule-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}